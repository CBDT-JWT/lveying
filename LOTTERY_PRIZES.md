# 多等奖抽奖功能说明

## 🎁 新功能概述

系统现在支持多次抽奖和多等奖管理，每次抽奖都可以设置不同的奖项名称（如一等奖、二等奖等），并自动保存历史记录。

## ✨ 新增功能

### 1. 奖项名称
- ✅ 每次抽奖前可以输入或选择奖项名称
- ✅ 提供快捷按钮：特等奖、一等奖、二等奖、三等奖
- ✅ 支持自定义奖项名称（可输入任意文字）
- ✅ 智能建议：抽完一等奖后自动建议二等奖

### 2. 抽奖历史
- ✅ 保存所有抽奖记录
- ✅ 显示奖项名称、中奖号码、抽奖时间
- ✅ 支持删除单条记录
- ✅ 支持一键清空所有历史
- ✅ 自动按时间倒序排列

### 3. Guest端显示
- ✅ 显示最新抽奖结果
- ✅ 醒目显示奖项名称（如"🏆 一等奖"）
- ✅ 显示中奖号码和开奖时间
- ✅ 自动刷新（每5秒）

## 📋 使用流程

### Admin端操作

1. **配置抽奖参数**
   - 设置号码范围（如1-100）
   - 设置抽取数量（如5个）
   - 点击"保存配置"

2. **进行抽奖**
   - 输入或选择奖项名称（如"一等奖"）
   - 点击"开始抽奖"按钮
   - 观看滚动数字动画
   - 结果自动保存到历史记录
   - 奖项名称自动切换到下一等奖

3. **管理历史记录**
   - 查看所有抽奖历史
   - 删除错误的记录
   - 清空所有历史（晚会结束后）

### Guest端体验

1. **访问抽奖页面**
   - 显示最新的抽奖结果
   - 醒目的奖项名称
   - 清晰的中奖号码

2. **自动更新**
   - 页面每5秒自动刷新
   - 无需手动刷新
   - 实时获取最新结果

## 🎯 使用场景示例

### 场景1：连续抽多个奖项

```
1. 抽特等奖（1名）
   - 输入"特等奖"
   - 设置抽取数量：1
   - 开始抽奖
   - 结果保存

2. 抽一等奖（3名）
   - 系统自动显示"一等奖"
   - 设置抽取数量：3
   - 开始抽奖
   - 结果保存

3. 抽二等奖（5名）
   - 系统自动显示"二等奖"
   - 设置抽取数量：5
   - 开始抽奖
   - 结果保存
```

### 场景2：查看历史记录

```
抽奖历史显示：

🏆 二等奖
中奖号码：23, 45, 67, 12, 89
开奖时间：2025-11-24 20:30:15

🏆 一等奖  
中奖号码：56, 78, 34
开奖时间：2025-11-24 20:25:10

🏆 特等奖
中奖号码：88
开奖时间：2025-11-24 20:20:05
```

## 🔧 API接口

### 新增接口

#### 1. 添加抽奖结果
```
POST /api/lottery/result
Headers: Authorization: Bearer {token}
Body: {
  "title": "一等奖",
  "numbers": [23, 45, 67, 12, 89]
}
```

#### 2. 获取抽奖历史
```
GET /api/lottery/history
Headers: Authorization: Bearer {token}
Response: {
  "results": [
    {
      "id": "1732456789000",
      "title": "一等奖",
      "numbers": [23, 45, 67, 12, 89],
      "timestamp": 1732456789000
    }
  ]
}
```

#### 3. 删除抽奖记录
```
DELETE /api/lottery/result
Headers: Authorization: Bearer {token}
Body: {
  "id": "1732456789000"
}
```

#### 4. 清空抽奖历史
```
DELETE /api/lottery/history
Headers: Authorization: Bearer {token}
```

## 💾 数据存储

### 数据结构
```json
{
  "lotteryResults": [
    {
      "id": "1732456789000",
      "title": "一等奖",
      "numbers": [23, 45, 67, 12, 89],
      "timestamp": 1732456789000
    },
    {
      "id": "1732456123000",
      "title": "特等奖",
      "numbers": [88],
      "timestamp": 1732456123000
    }
  ]
}
```

### 存储位置
`data/store.json` 文件中的 `lotteryResults` 数组

## 🎨 UI改进

### Admin端
1. **奖项名称输入框**
   - 位置：抽奖显示区域顶部
   - 支持手动输入
   - 提供快捷按钮

2. **抽奖历史面板**
   - 卡片式展示
   - 彩色标签显示奖项
   - 悬停高亮效果
   - 删除按钮

### Guest端
1. **醒目的奖项标题**
   - 大号字体
   - 渐变色彩
   - 奖杯图标

2. **优化的号码展示**
   - 网格布局
   - 渐变背景
   - 阴影效果

## 💡 使用建议

### 抽奖前
1. 提前规划好奖项设置
2. 准备好奖项名称列表
3. 测试抽奖流程

### 抽奖中
1. 先抽大奖（特等奖、一等奖）
2. 逐步抽取其他奖项
3. 每次抽奖后确认结果

### 抽奖后
1. 保留历史记录作为存档
2. 可截图保存重要结果
3. 晚会结束后清空历史

## 🔄 智能建议

系统会根据当前奖项自动建议下一个：
- 特等奖 → 一等奖
- 一等奖 → 二等奖
- 二等奖 → 三等奖
- 三等奖 → 四等奖
- 四等奖 → 五等奖
- 其他 → 一等奖

## ⚠️ 注意事项

1. **奖项名称必填**
   - 开始抽奖前必须输入奖项名称
   - 如果未输入，系统会提示

2. **历史记录管理**
   - 删除操作需要确认
   - 清空历史会删除所有记录
   - 建议定期备份数据

3. **Guest端显示**
   - 只显示最新的抽奖结果
   - 如果需要查看历史，在Admin端查看

## 🎉 优势

1. **灵活性**
   - 支持任意奖项名称
   - 不限制抽奖次数

2. **可追溯**
   - 完整的历史记录
   - 精确的时间戳

3. **用户友好**
   - 快捷按钮
   - 智能建议
   - 直观界面

4. **数据安全**
   - 自动保存到文件
   - 支持删除和清空
   - 完整的记录

---

**提示**：这个功能完美支持多等奖抽奖场景，让晚会抽奖环节更加专业和有序！🎊
